{
    "_comment": "DO NOT EDIT: FILE GENERATED AUTOMATICALLY BY PTERODACTYL PANEL - PTERODACTYL.IO",
    "meta": {
        "version": "PTDL_v1",
        "update_url": null
    },
    "exported_at": "2021-01-09T14:37:08+01:00",
    "name": "TrackMania Nations Forever \/ United Forever + xAseco",
    "author": "info@gamemania.org",
    "description": "TrackMania Nations Forever \/ United Forever Dedicated Server with xAseco",
    "features": null,
    "images": [
        "hoerli\/tmnf-uf:latest"
    ],
    "startup": ".\/start.sh",
    "config": {
        "files": "{}",
        "startup": "{\r\n    \"done\": \"Starting server...\",\r\n    \"userInteraction\": []\r\n}",
        "logs": "{}",
        "stop": "^C"
    },
    "scripts": {
        "installation": {
            "script": "#!\/bin\/sh\r\n# TRACKMANIA NF UF Installation Script\r\n#\r\n## Vars\r\nDEDICATED_URL=\"http:\/\/files2.trackmaniaforever.com\/TrackmaniaServer_2011-02-21.zip\"\r\nTRACKLIST_URL=\"https:\/\/raw.githubusercontent.com\/Hoerli1337\/pterodactyl-eggs\/master\/TMNF-UF\/tracklist.txt\"\r\nXASECO_DL=\"https:\/\/fastdl.gamemania.org\/xaseco1.16-php7.zip\"\r\nUSER=\"container\"\r\nWORKDIR=\"\/mnt\/server\"\r\n\r\nmkdir -pv ${WORKDIR}\r\ncd ${WORKDIR}\r\n\r\n## Install Stuff to run xaseco.\r\napk add --no-cache --update ca-certificates wget unzip tar bash fontconfig php7 php7-fpm php7-gd php7-xml php7-curl php7-mysqli php7-zip php7-mbstring php7-xmlrpc php7-intl php7-common php7-cli php7-bz2\r\nadduser -D -h \/home\/container container\r\n## Add a folder for TM-Server\r\nmkdir -pv ${WORKDIR}\/TrackManiaServer\r\ncd ${WORKDIR}\/TrackManiaServer\r\nwget ${DEDICATED_URL} -qO ${WORKDIR}\/TrackManiaServer\/dedicated.zip\r\nunzip -qo ${WORKDIR}\/TrackManiaServer\/dedicated.zip -d ${WORKDIR}\/TrackManiaServer\r\nchmod 775 -v ${WORKDIR}\/TrackManiaServer\/TrackmaniaServer\r\nchown -Rv ${USER}: ${WORKDIR}\r\n\r\n## Cleanup\r\nrm -r ${WORKDIR}\/TrackManiaServer\/RemoteControlExamples\r\nrm ${WORKDIR}\/TrackManiaServer\/CommandLine.html\r\nrm ${WORKDIR}\/TrackManiaServer\/ListCallbacks.html \r\nrm ${WORKDIR}\/TrackManiaServer\/ListMethods.html\r\nrm ${WORKDIR}\/TrackManiaServer\/manialink_dedicatedserver.txt\r\nrm ${WORKDIR}\/TrackManiaServer\/Readme_Dedicated.html\r\nrm ${WORKDIR}\/TrackManiaServer\/GameData\/Config\/dedicated_cfg.txt\r\nrm ${WORKDIR}\/TrackManiaServer\/TrackmaniaServer.exe\r\nrm -rfv \/tmp\/* \/var\/tmp\/* \/var\/cache\/apk\/*\r\nrm ${WORKDIR}\/TrackManiaServer\/dedicated.zip\r\n\r\n## Configuration\r\n# Make sure we use defaults everywhere.\r\n: ${PACKMASK:=\"stadium\"}\r\n: ${DEDICATED_CFG:=\"dedicated_cfg.txt\"}\r\n: ${MATCH_SETTINGS:=\"MatchSettings\/tracklist.txt\"}\r\n: ${SERVER_NAME:=\"GameMania.org Trackmania Server\"}\r\n: ${TM_SERVER_PORT:=\"2350\"}\r\n\r\n# Copy the configuration files if not yet copied.\r\nmkdir -pv ${WORKDIR}\/TrackManiaServer\/GameData ${WORKDIR}\/TrackManiaServer\/GameData\/Config ${WORKDIR}\/TrackManiaServer\/GameData\/Tracks\/MatchSettings\r\n## {{{ config.txt\r\nif [ ! -f ${WORKDIR}\/TrackManiaServer\/GameData\/Config\/${DEDICATED_CFG} ]; then\r\necho \"<?xml version=\"1.0\" encoding=\"utf-8\" ?>\r\n\r\n<dedicated>\r\n\t<authorization_levels>\r\n\t\t<level>\r\n\t\t\t<name>${SUPERADMIN_NAME:-SuperAdmin}<\/name>\r\n\t\t\t<password>${SUPERADMIN_PWD:-SuperAdmin}<\/password>\r\n\t\t<\/level>\r\n\t\t<level>\r\n\t\t\t<name>${ADMIN_NAME:-Admin}<\/name>\r\n\t\t\t<password>${ADMIN_PWD:-Admin}<\/password>\r\n\t\t<\/level>\r\n\t\t<level>\r\n\t\t\t<name>${USER_PWD:-User}<\/name>\r\n\t\t\t<password>${USER_PWD:-User}<\/password>\r\n\t\t<\/level>\r\n\t<\/authorization_levels>\r\n\t\r\n \t<masterserver_account>\r\n\t\t<login>${MASTERSERVER_ACCOUNT_USER:-}<\/login>\r\n\t\t<password>${MASTERSERVER_ACCOUNT_PWD:-}<\/password>\r\n\t\t<validation_key>${MASTERSERVER_KEY:-}<\/validation_key>\r\n\t<\/masterserver_account>\r\n\t\r\n\t<server_options>\r\n\t\t<name>${SERVER_NAME:-}<\/name>\r\n\t\t<comment>\r\n\t\t\t${COMMENT:-}\r\n\t\t<\/comment>\r\n\t\t<hide_server>${HIDE_SERVER:-0}<\/hide_server>\r\n\t\t<max_players>${MAX_PLAYERS:-32}<\/max_players>\r\n\t\t<password>${SERVER_PASSWORD:-}<\/password>\r\n\t\t<max_spectators>${MAX_SPECTATORS:-32}<\/max_spectators>\r\n\t\t<password_spectator>${PASSWORD_SPECTATOR:-}<\/password_spectator>\r\n\t\t<ladder_mode>${LADDER_MODE:-forced}<\/ladder_mode>\r\n\t\t<ladder_serverlimit_min>${LADDER_SERVERLIMIT_MIN:-}<\/ladder_serverlimit_min>\r\n\t\t<ladder_serverlimit_max>${LADDER_SERVERLIMIT_MAX:-}<\/ladder_serverlimit_max>\t\t\r\n\t\t<enable_p2p_upload>${P2P_UPLOAD:-True}<\/enable_p2p_upload>\r\n\t\t<enable_p2p_download>${P2P_DOWNLOAD:-True}<\/enable_p2p_download>\r\n\t\t<callvote_timeout>${CALLVOTE_TIMEOUT:-60000}<\/callvote_timeout>\r\n\t\t<callvote_ratio>${CALLVOTE_RATIO:-0.5}<\/callvote_ratio>\r\n\t\t<callvote_ratios>\r\n\t\t\t<voteratio command=\\\"Ban\\\" ratio=\\\"0.65\\\"\/>\r\n\t\t<\/callvote_ratios>\r\n\t\t<allow_challenge_download>${ALLOW_CHALLENGE_DOWNLOAD:-True}<\/allow_challenge_download>\r\n\t\t<autosave_replays>${AUTOSAVE_REPLAYS:-False}<\/autosave_replays>\r\n\t\t<autosave_validation_replays>${AUTOSAVE_VALIDATION_REPLAYS:-False}<\/autosave_validation_replays>\r\n\t\t<referee_password>${REFEREE_PASSWORD:-}<\/referee_password>\r\n\t\t<referee_validation_mode>${REFEREE_VALIDATION_MODE:-0}<\/referee_validation_mode>\r\n\t\t<use_changing_validation_seed>${USE_CHANGING_VALIDATION_SEED:-False}<\/use_changing_validation_seed>\r\n\t<\/server_options>\r\n\t\r\n\t<system_config>\r\n\t\t<connection_uploadrate>${CONN_UPLOAD_RATE:-90000}<\/connection_uploadrate>\r\n\t\t<connection_downloadrate>${CONN_DOWNLOAD_RATE:-90000}<\/connection_downloadrate>\r\n\t\t<force_ip_address>${FORCE_IP_ADDRESS:-}<\/force_ip_address>\r\n\t\t<server_port>${TM_SERVER_PORT:-2350}<\/server_port>\r\n\t\t<server_p2p_port>${SERVER_P2P_PORT:-3450}<\/server_p2p_port>\r\n\t\t<client_port>${CLIENT_PORT:-0}<\/client_port>\r\n\t\t<bind_ip_address>${BIND_IP_ADDRESS:-}<\/bind_ip_address>\r\n\t\t<use_nat_upnp>${USE_NAT_UPNP:-}<\/use_nat_upnp>\r\n\t\t<p2p_cache_size>${P2P_CACHE_SIZE:-4000}<\/p2p_cache_size>\r\n\t\t<xmlrpc_port>${XMLRPC_PORT:-5000}<\/xmlrpc_port>\r\n\t\t<xmlrpc_allowremote>${XMLRPC_ALLOW_REMOTE:-True}<\/xmlrpc_allowremote>\r\n\t\t<blacklist_url>${BLACKLIST_URL:-}<\/blacklist_url>\r\n\t\t<guestlist_filename>${GUESTLIST_FILENAME:-}<\/guestlist_filename>\r\n\t\t<blacklist_filename>${BLACKLIST_FILENAME:-}<\/blacklist_filename>\r\n\t\t<packmask>${PACKMASK:-stadium}<\/packmask>\r\n\t\t<allow_spectator_relays>${ALLOW_SPECTATOR_RELAYS:-False}<\/allow_spectator_relays>\r\n\t\t<use_proxy>${USE_PROXY:-False}<\/use_proxy>\r\n\t\t<proxy_login>${PROXY_LOGIN:-}<\/proxy_login>\r\n\t\t<proxy_password>${PROXY_PWD:-}<\/proxy_password>\r\n\t<\/system_config>\r\n<\/dedicated>\r\n\" > ${WORKDIR}\/TrackManiaServer\/GameData\/Config\/${DEDICATED_CFG}\r\nfi\r\n## config.txt }}}\r\n## {{{ tracklist.txt\r\nwget ${TRACKLIST_URL} -qO ${WORKDIR}\/TrackManiaServer\/GameData\/Tracks\/${MATCH_SETTINGS}\r\n## tracklist.txt }}}\r\n\r\n## Setup xaseco with the know variables\r\n\r\n## {{{ xaseco\r\n# Create new folder\r\nmkdir -pv ${WORKDIR}\/xaseco\r\ncd ${WORKDIR}\/xaseco\r\nwget ${XASECO_DL} -qO ${WORKDIR}\/xaseco\/xaseco.zip\r\nunzip -qo ${WORKDIR}\/xaseco\/xaseco.zip -d ${WORKDIR}\/xaseco\r\nrm ${WORKDIR}\/xaseco\/xaseco.zip\r\nchown -Rv ${USER}:${USER} ${WORKDIR}\r\n\r\nrm ${WORKDIR}\/xaseco\/Aseco.sh\r\nrm ${WORKDIR}\/xaseco\/Aseco.bat\r\nrm ${WORKDIR}\/xaseco\/AsecoF.sh\r\n\r\nif [ ! -f ${WORKDIR}\/xaseco\/Aseco.sh ]; then\r\necho \"#!\/bin\/sh\r\ncd \/home\/container\/xaseco\r\nphp aseco.php TMN <\/dev\/null >aseco.log 2>&1 &\r\necho \\$! >> pid.txt\r\n\" > ${WORKDIR}\/xaseco\/Aseco.sh\r\nfi\r\nchmod 775 -v ${WORKDIR}\/xaseco\/Aseco.sh\r\n\r\nif [ ! -f ${WORKDIR}\/xaseco\/AsecoF.sh ]; then\r\necho \"#!\/bin\/sh\r\ncd \/home\/container\/xaseco\r\nphp aseco.php TMF <\/dev\/null >aseco.log 2>&1 &\r\necho \\$!\r\n\" > ${WORKDIR}\/xaseco\/AsecoF.sh\r\nfi\r\n\r\nchmod 775 -v ${WORKDIR}\/xaseco\/Aseco.sh\r\nchmod 775 -v ${WORKDIR}\/xaseco\/AsecoF.sh\r\n## xaseco }}}\r\n\r\n# Remove default config files to add the correct parameters\r\nrm ${WORKDIR}\/xaseco\/config.xml\r\nrm ${WORKDIR}\/xaseco\/dedimania.xml\r\n\r\n## {{{ config.xml\r\nif [ ! -f ${WORKDIR}\/xaseco\/config.xml ]; then\r\necho \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\" ?>\r\n<settings>\r\n  <aseco>\r\n    <masteradmins>\r\n      <!-- \/ip:port in tmlogin only needed when joining server over LAN -->\r\n      <!-- ipaddress can be specified to guard each login against       -->\r\n      <!-- unauthorized use of admin commands from other IP addresses   -->\r\n<!-- format:\r\n      <tmlogin>YOUR_MASTERADMIN_LOGIN<\/tmlogin> <ipaddress>YOUR_MASTERADMIN_IP<\/ipaddress>\r\n-->\r\n    <\/masteradmins>\r\n\r\n    <colors>\r\n      <error>\\$f00\\$i<\/error>\r\n      <welcome>\\$f00<\/welcome>\r\n      <server>\\$ff0<\/server>\r\n      <highlite>\\$fff<\/highlite>\r\n      <timelite>\\$bbb<\/timelite>\r\n      <record>\\$0f3<\/record>\r\n      <emotic>\\$fa0<\/emotic>\r\n      <music>\\$d80<\/music>\r\n      <message>\\$39f<\/message>\r\n      <rank>\\$ff3<\/rank>\r\n      <vote>\\$f8f<\/vote>\r\n      <karma>\\$ff0<\/karma>\r\n      <donate>\\$f0f<\/donate>\r\n      <admin>\\$ff0<\/admin>\r\n      <black>\\$000<\/black>\r\n      <grey>\\$888<\/grey>\r\n      <login>\\$00f<\/login>\r\n      <logina>\\$0c0<\/logina>\r\n      <nick>\\$f00<\/nick>\r\n      <interact>\\$ff0\\$i<\/interact>\r\n      <dedimsg>\\$28b<\/dedimsg>\r\n      <dedirec>\\$0b3<\/dedirec>\r\n    <\/colors>\r\n\r\n    <messages>\r\n      <!-- init messages -->\r\n      <startup>{#server}*** XASECO {#highlite}v{1}{#server} running on {#highlite}{2}{#server}:{#highlite}{3}{#server} ***<\/startup>\r\n      <welcome>{#welcome}Welcome {#highlite}{1}{#welcome} to {#highlite}{2}\\$z\\$s{br}{#welcome}This server uses {#highlite}XASECO v{3}{#welcome} to manage your records.<\/welcome>\r\n      <warning>\\$s{#welcome}This is an administrative warning.{br}{br}\\$gWhatever you wrote is against our server's{br}policy. Not respecting other players, or{br}using offensive language might result in a{br}{#welcome}kick, or ban {#message}the next time.{br}{br}\\$gThe server administrators.<\/warning>\r\n\r\n      <!-- record messages -->\r\n      <record_current>{#server}>> {#message}Current record on {#highlite}{1}{#message} is {#highlite}{2}{#message} by {#highlite}{3}<\/record_current>\r\n      <record_none>{#server}>> {#message}Currently no record on {#highlite}{1}{#message} ...<\/record_none>\r\n      <record_error>{#server}>> {#error}Could not get records from database... No records this round!<\/record_error>\r\n\r\n      <!-- ranking messages -->\r\n      <ranking>{#server}>> {#message}Local Record rankings on {#highlite}{1}{#message} {2} this round:<\/ranking>\r\n      <ranking_range>{#server}>> {#message}Local Record rankings on {#highlite}{1}{#message} {2} this round (range {#highlite}{3}{#message}):<\/ranking_range>\r\n      <ranking_new>{#server}>> {#message}Local Record rankings on {#highlite}{1}{#message} {2} this round ({#highlite}{3}{#message} new):<\/ranking_new>\r\n      <ranking_nonew>{#server}>> {#message}Local Record rankings on {#highlite}{1}{#message} {2} this round: none new so far<\/ranking_nonew>\r\n      <ranking_none>{#server}>> {#message}Local Record rankings on {#highlite}{1}{#message} {2} this round: no records!<\/ranking_none>\r\n\r\n      <!-- record misc. messages -->\r\n      <ranking_record_new_on>{#rank}{1}{#message}.\\$i{#highlite}{2}{#message}[{#highlite}{3}{#message}]\\$i, <\/ranking_record_new_on>\r\n      <ranking_record_new>{#rank}{1}{#message}.{#highlite}{2}{#message}[{#highlite}{3}{#message}], <\/ranking_record_new>\r\n      <ranking_record_on>{#rank}{1}{#message}.\\$i{#timelite}{2}{#message}[{#timelite}{3}{#message}]\\$i, <\/ranking_record_on>\r\n      <ranking_record>{#rank}{1}{#message}.{#timelite}{2}{#message}[{#timelite}{3}{#message}], <\/ranking_record>\r\n      <ranking_record2>{#rank}{1}{#message}.{#timelite}{2}{#message}, <\/ranking_record2>\r\n\r\n      <!-- record relation messages -->\r\n      <first_record>{#server}> {#record}The first Local record is: <\/first_record>\r\n      <last_record>{#server}> {#record}The last Local record is: <\/last_record>\r\n      <diff_record>{#server}> {#record}Difference between {1}{#record} and {2}{#record} is: {#highlite}{3}<\/diff_record>\r\n      <summary>{#server}> {#highlite}{1} \\$z\\$s{#record}has {#highlite}{2}{#record} Local record{3}, the top {4} being: <\/summary>\r\n      <sum_entry>{#highlite}{1} {#record}rec{2} #{#rank}{3}{#record}, <\/sum_entry>\r\n\r\n      <!-- win messages -->\r\n      <wins>{#server}> {#record}You have already won {#highlite}{1}{#record} race{2}<\/wins>\r\n      <win_new>{#server}> {#record}Congratulations, you won your {#highlite}{1}{#record}. race!<\/win_new>\r\n      <win_multi>{#server}>> {#record}Congratulations, {#highlite}{1}{#record} won his\/her {#highlite}{2}{#record}. race!<\/win_multi>\r\n\r\n      <!-- muting messages -->\r\n      <mute>{#server}> Player {#highlite}{1}\\$z\\$s{#server} is muted!<\/mute>\r\n      <unmute>{#server}> Player {#highlite}{1}\\$z\\$s{#server} is unmuted!<\/unmute>\r\n      <muted>{#server}> {#highlite}{1}{#error} disabled because you are on the global mute list!<\/muted>\r\n\r\n      <!-- donate\/pay messages -->\r\n      <donation>{#donate} Donate {#highlite}{1}{#donate} coppers to {#highlite}{2}\\$z<\/donation>\r\n      <thanks_all>{#server}>> {#highlite}{1}\\$z\\$s{#donate} received a donation of {#highlite}{2}{#donate} coppers from {#highlite}{3}\\$z\\$s{#donate}.  Thank You!<\/thanks_all>\r\n      <thanks_you>{#server}> {#donate}You made a donation of {#highlite}{1}{#donate} coppers.  Thank You!<\/thanks_you>\r\n      <donate_minimum>{#server}> {#error}Minimum donation amount is {#highlite}\\$i {1}{#error} coppers!<\/donate_minimum>\r\n      <donate_help>{#server}> {#error}Use {#highlite}\\$i \/donate &lt;number&gt;{#error} to donate coppers to the server<\/donate_help>\r\n      <payment>{#donate} Send {#highlite}{1}{#donate} coppers to {#highlite}{2}\\$z<\/payment>\r\n      <pay_insuff>{#server}> {#error}Insufficient server coppers: {#highlite}\\$i {1}{#error}!<\/pay_insuff>\r\n      <pay_server>{#server}> {#error}Cannot pay this server itself!<\/pay_server>\r\n      <pay_confirm>{#server}> {#donate}Payment of {#highlite}{1}{#donate} coppers to {#highlite}{2}{#donate} confirmed!  Remaining coppers: {#highlite}{3}<\/pay_confirm>\r\n      <pay_cancel>{#server}> {#donate}Payment to {#highlite}{1}{#donate} cancelled!<\/pay_cancel>\r\n      <pay_help>{#server}> {#error}Use {#highlite}\\$i \/admin pay &lt;login&gt; \\$m&lt;number&gt;{#error} to send server coppers to a login<\/pay_help>\r\n\r\n      <!-- playtime\/track messages -->\r\n      <playtime>{#server}> Current track {#highlite}{1}{#server} has been played for {#highlite}{2}<\/playtime>\r\n      <playtime_finish>{#server}>> Current track {#highlite}{1}{#server} finished after {#highlite}{2}<\/playtime_finish>\r\n      <playtime_replay> {#server}({#highlite}{1}{#server} replay{2}, total {#highlite}{3}{#server})<\/playtime_replay>\r\n      <track>{#server}> Current track {#highlite}{1} {#server}by {#highlite}{2}  {#server}Author: {#highlite}{3} {#server}Gold: {#highlite}{4} {#server}Silver: {#highlite}{5} {#server}Bronze: {#highlite}{6} {#server}Cost: {#highlite}{7}<\/track>\r\n      <current_track>{#server}>> Current track {#highlite}{1} {#server}by {#highlite}{2}  {#server}Author: {#highlite}{3}<\/current_track>\r\n\r\n      <!-- rounds points messages -->\r\n      <rpoints_named>{#server}> {1}Custom points system set to {#highlite}{2}{3}: {#highlite}{4},...<\/rpoints_named>\r\n      <rpoints_nameless>{#server}> {1}Custom points system set to: {#highlite}{2},...<\/rpoints_nameless>\r\n      <no_rpoints>{#server}> {1}No custom Rounds points system defined!<\/no_rpoints>\r\n\r\n      <!-- relay messages -->\r\n      <no_relays>{#server}> {#error}No relay servers connected<\/no_relays>\r\n      <relaymaster>{#server}> This server relays master server: {#highlite}{1}{#server} ({#highlite}{2}{#server})<\/relaymaster>\r\n      <notonrelay>{#server}> {#error}Command unavailable on relay server<\/notonrelay>\r\n\r\n      <!-- uptodate messages -->\r\n      <uptodate_ok>{#server}>> {#message}This XASECO version {#highlite}{1}{#message} is up to date<\/uptodate_ok>\r\n      <uptodate_new>{#server}>> {#message}New XASECO version {#highlite}{1}{#message} available from {#highlite}{2}<\/uptodate_new>\r\n\r\n      <!-- connection messages -->\r\n      <banip_dialog>{#welcome}Your IP was banned from this server.\\$z<\/banip_dialog>\r\n      <banip_error>{#welcome}Could not connect:{br}{br}Your IP was banned from this server!<\/banip_error>\r\n      <client_dialog>{#welcome}Obsolete client version, please \\$l[http:\/\/www.tm-forum.com\/viewtopic.php?p=139752#p139752]upgrade\\$l.\\$z<\/client_dialog>\r\n      <client_error>{#welcome}Obsolete client version!{br}Please upgrade to the \\$l[http:\/\/www.tm-forum.com\/viewtopic.php?p=139752#p139752]latest version\\$l.<\/client_error>\r\n      <connect_dialog>{#welcome}Connection problem, please retry.\\$z<\/connect_dialog>\r\n      <connect_error>{#welcome}\\$sThis is an administrative notice.\\$z{br}{br}XASECO encountered a very rare player connection{br}problem. Please re-join the server to correct it.{br}Apologies for the inconvenience.{br}{br}\\$sThe server administrators.<\/connect_error>\r\n\r\n      <!-- idlekick messages -->\r\n      <idlekick_play>{#server}>> IdleKick player {#highlite}{1}\\$z\\$s{#server} after {#highlite}{2}{#server} challenge{3}!<\/idlekick_play>\r\n      <idlespec_play>{#server}>> IdleSpec player {#highlite}{1}\\$z\\$s{#server} after {#highlite}{2}{#server} challenge{3}<\/idlespec_play>\r\n      <idlekick_spec>{#server}>> IdleKick spectator {#highlite}{1}\\$z\\$s{#server} after {#highlite}{2}{#server} challenge{3}!<\/idlekick_spec>\r\n\r\n      <!-- miscellaneous messages -->\r\n      <song>{#server}> Track {#highlite}{1} {#server}plays song: {#highlite}{2}<\/song>\r\n      <mod>{#server}> Track {#highlite}{1} {#server}uses mod: {#highlite}{2} {#server}({#highlite}{3}{#server})<\/mod>\r\n      <coppers>{#server}> Server {#highlite}{1}\\$z\\$s {#server}owns {#highlite}{2} {#server}coppers!<\/coppers>\r\n      <time>{#server}> {#interact}Current Server Time: {#highlite}\\$i {1}{#interact} on {#highlite}\\$i {2}<\/time>\r\n      <tmxrec>{#server}>> {#record}TMX World Record: {#highlite}{1}{#record} by {#highlite}{2}<\/tmxrec>\r\n      <round>\\$n{#message}R{#highlite}{1}{#message}> <\/round>\r\n      <no_cpsspec>{#server}> {#highlite}\/cpsspec{#server} is not currently enabled on this server.<\/no_cpsspec>\r\n      <no_admin>{#server}> {#error}You have to be in admin list to do that!<\/no_admin>\r\n      <help_explanation>{#server}> Press the {#highlite}C{#server} key to see the whole list, and use {#highlite}\/helpall{#server} for details<\/help_explanation>\r\n      <united_only>{#server}> {#error}This requires a TM United Forever {1}!<\/united_only>\r\n      <forever_only>{#server}> {#error}Command only available on TM Forever!<\/forever_only>\r\n    <\/messages>\r\n\r\n    <welcome_msg_window>False<\/welcome_msg_window>\r\n    <lock_password><\/lock_password>\r\n    <log_all_chat>False<\/log_all_chat>\r\n    <chatpmlog_times>True<\/chatpmlog_times>\r\n    <cheater_action>0<\/cheater_action>\r\n    <script_timeout>60<\/script_timeout>\r\n\r\n    <show_min_recs>8<\/show_min_recs>\r\n    <!-- 2 = full report, 1 = only track record, 0 = none -->\r\n    <!-- add 4 to show the report in the TMF message      -->\r\n    <!-- window instead of the main chat window           -->\r\n    <show_recs_before>2<\/show_recs_before>\r\n    <!-- 2 = full report, 1 = only top-5, 0 = none        -->\r\n    <!-- add 4 to show the report in the TMF message      -->\r\n    <!-- window instead of the main chat window           -->\r\n    <show_recs_after>2<\/show_recs_after>\r\n    <show_recs_range>True<\/show_recs_range>\r\n    <!-- 2 = in TMF message window, 1 = in chat, 0 = none -->\r\n    <show_tmxrec>1<\/show_tmxrec>\r\n    <!-- 2 = in TMF message window, 1 = in chat, 0 = none -->\r\n    <show_playtime>1<\/show_playtime>\r\n    <!-- 2 = in TMF message window, 1 = in chat, 0 = none -->\r\n    <show_curtrack>0<\/show_curtrack>\r\n\r\n    <default_tracklist>tracklist.txt<\/default_tracklist>\r\n    <writetracklist_random>True<\/writetracklist_random>\r\n    <help_explanation>False<\/help_explanation>\r\n    <lists_colornicks>True<\/lists_colornicks>\r\n    <lists_colortracks>True<\/lists_colortracks>\r\n    <topclans_minplayers>2<\/topclans_minplayers>\r\n    <global_win_multiple>50<\/global_win_multiple>\r\n    <display_checkpoints>True<\/display_checkpoints>\r\n    <enable_cpsspec>False<\/enable_cpsspec>\r\n    <auto_enable_cps>True<\/auto_enable_cps>\r\n    <auto_enable_dedicps>False<\/auto_enable_dedicps>\r\n    <auto_admin_addip>True<\/auto_admin_addip>\r\n    <adminops_file>adminops.xml<\/adminops_file>\r\n    <bannedips_file>bannedips.xml<\/bannedips_file>\r\n    <blacklist_file>blacklist.txt<\/blacklist_file>\r\n    <guestlist_file>guestlist.txt<\/guestlist_file>\r\n    <trackhist_file>trackhist.txt<\/trackhist_file>\r\n\r\n    <!-- the remaining settings are for TMF only          -->\r\n    <admin_client_version>2.11.19<\/admin_client_version>\r\n    <player_client_version><\/player_client_version>\r\n    <default_rpoints><\/default_rpoints>\r\n    <afk_force_spec>True<\/afk_force_spec>\r\n    <clickable_lists>True<\/clickable_lists>\r\n    <show_rec_logins>True<\/show_rec_logins>\r\n    <!-- True = in TMF message window, False = in chat    -->\r\n    <recs_in_window>False<\/recs_in_window>\r\n    <!-- True = in TMF message window, False = in chat    -->\r\n    <rounds_in_window>False<\/rounds_in_window>\r\n    <!-- timeout of the TMF message window in seconds     -->\r\n    <window_timeout>6<\/window_timeout>\r\n    <!-- True = display individual stats panels for each  -->\r\n    <!-- player during the scoreboard & disable the rank  -->\r\n    <!-- chat messages, False = show only rank messages   -->\r\n    <sb_stats_panels>False<\/sb_stats_panels>\r\n\r\n    <!-- default windows style: none for old TMN-like, or -->\r\n    <!-- filename that should be at styles\/<filename>.xml -->\r\n    <window_style>DarkBlur<\/window_style>\r\n    <!-- default panels:  empty for no panel, otherwise a -->\r\n    <!-- filename that should be at panels\/<filename>.xml -->\r\n    <admin_panel>AdminBelowChat<\/admin_panel>\r\n    <donate_panel>DonateBelowCPList<\/donate_panel>\r\n    <records_panel>RecordsRightBottom<\/records_panel>\r\n    <vote_panel>VoteBelowChat<\/vote_panel>\r\n  <\/aseco>\r\n\r\n  <tmserver>\r\n    <login>SuperAdmin<\/login>\r\n    <password>${SUPERADMIN_PWD:-SuperAdmin}<\/password>\r\n    <ip>127.0.0.1<\/ip>\r\n    <port>${XMLRPC_PORT:-5000}<\/port>\r\n    <timeout>180<\/timeout>\r\n  <\/tmserver>\r\n<\/settings>\r\n\" > ${WORKDIR}\/xaseco\/config.xml\r\nfi\r\n## config.xml }}}\r\n## {{{ dedimania.xml\r\nif [ ! -f ${WORKDIR}\/xaseco\/dedimania.xml ]; then\r\necho \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" ?>\r\n<dedimania>\r\n\t<database>\r\n\t\t<welcome>{#welcome}Welcome to the Dedimania world record system at www.dedimania.com - see {#highlite}\/helpdedi<\/welcome>\r\n\t\t<timeout>{#dedimsg}Dedimania system timed out - retrying in {#highlite}{1}{#dedimsg} minutes<\/timeout>\r\n\t\t<name>Dedimania<\/name>\r\n\t\t<!-- Dedimania communication link, do not modify this! -->\r\n\t\t<url>http:\/\/dedimania.net:8002\/Dedimania<\/url>\r\n\t\t<!-- Log Dedimania news in logfile? -->\r\n\t\t<log_news>True<\/log_news>\r\n\t\t<!-- Show welcome message in chat?  -->\r\n\t\t<show_welcome>True<\/show_welcome>\r\n\t\t<!-- Minimum number of records you'd always like to see at -->\r\n\t\t<!-- the start and end of tracks, and with \/dedilive (-2)  -->\r\n\t\t<show_min_recs>8<\/show_min_recs>\r\n\t\t<!-- Display existing records at start of a new track?     -->\r\n\t\t<!-- 2 = in message window, 1 = in chat, 0 = none          -->\r\n\t\t<show_recs_before>1<\/show_recs_before>\r\n\t\t<!-- Display (possibly) updated records at end of a track? -->\r\n\t\t<!-- 2 = in message window, 1 = in chat, 0 = none          -->\r\n\t\t<show_recs_after>1<\/show_recs_after>\r\n\t\t<!-- Display records range if there are no new records?  -->\r\n\t\t<show_recs_range>True<\/show_recs_range>\r\n\t\t<!-- Do you want XASECO to display newly driven records? -->\r\n\t\t<display_recs>True<\/display_recs>\r\n\t\t<!-- Show logins on TMF for players in \/dedirecs ?       -->\r\n\t\t<show_rec_logins>True<\/show_rec_logins>\r\n\t\t<!-- Display records in TMF message window or in chat?   -->\r\n\t\t<recs_in_window>False<\/recs_in_window>\r\n\t\t<!-- Limit the highest record that will be displayed to   -->\r\n\t\t<!-- all? Only the pertaining player sees higher records, -->\r\n\t\t<!-- so typically this is the same as your Server MaxRank -->\r\n\t\t<limit_recs>30<\/limit_recs>\r\n\t<\/database>\r\n\r\n\t<!-- Dedimania server registration, copy these from dedicated.cfg -->\r\n\t<!-- Instead of password you can also use the community code for  -->\r\n\t<!-- your server by using the login\/password on the official site -->\r\n\t<!-- For the nation, please use the 3-character abbreviation from -->\r\n\t<!-- http:\/\/en.wikipedia.org\/wiki\/List_of_IOC_country_codes       -->\r\n\t<masterserver_account>\r\n\t\t<login>${MASTERSERVER_ACCOUNT_USER:-}<\/login>\r\n\t\t<password>${MASTERSERVER_ACCOUNT_PWD:-}<\/password>\r\n\t\t<nation>YOUR_SERVER_NATION<\/nation>\r\n\t<\/masterserver_account>\r\n\r\n\t<messages>\r\n\t\t<!-- ranking messages -->\r\n\t\t<ranking>{#server}>> {#dedimsg}Dedimania Record rankings on {#highlite}{1}{#dedimsg} {2} this round:<\/ranking>\r\n\t\t<ranking_range>{#server}>> {#dedimsg}Dedimania Record rankings on {#highlite}{1}{#dedimsg} {2} this round (range {#highlite}{3}{#dedimsg}):<\/ranking_range>\r\n\t\t<ranking_new>{#server}>> {#dedimsg}Dedimania Record rankings on {#highlite}{1}{#dedimsg} {2} this round ({#highlite}{3}{#dedimsg} new):<\/ranking_new>\r\n\t\t<ranking_nonew>{#server}>> {#dedimsg}Dedimania Record rankings on {#highlite}{1}{#dedimsg} {2} this round: none new so far<\/ranking_nonew>\r\n\t\t<ranking_none>{#server}>> {#dedimsg}Dedimania Record rankings on {#highlite}{1}{#dedimsg} {2} this round: no records!<\/ranking_none>\r\n\r\n\t\t<!-- record messages -->\r\n\t\t<record_new>{#server}>> {#highlite}{1}{#dedirec} secured his\/her {#rank}{2}{#dedirec}. Dedimania Record!  {3}: {#highlite}{4}{#dedirec} \\$n({#rank}{5}{#highlite}{6}{#dedirec})<\/record_new>\r\n\t\t<record_equal>{#server}>> {#highlite}{1}{#dedirec} equaled his\/her {#rank}{2}{#dedirec}. Dedimania Record!  {3}: {#highlite}{4}<\/record_equal>\r\n\t\t<record_new_rank>{#server}>> {#highlite}{1}{#dedirec} gained the {#rank}{2}{#dedirec}. Dedimania Record!  {3}: {#highlite}{4}{#dedirec} \\$n({#rank}{5}{#highlite}{6}{#dedirec})<\/record_new_rank>\r\n\t\t<record_first>{#server}>> {#highlite}{1}{#dedirec} claimed the {#rank}{2}{#dedirec}. Dedimania Record!  {3}: {#highlite}{4}<\/record_first>\r\n\r\n\t\t<!-- record relation messages -->\r\n\t\t<first_record>{#server}> {#dedirec}The first Dedimania record is: <\/first_record>\r\n\t\t<last_record>{#server}> {#dedirec}The last Dedimania record is: <\/last_record>\r\n\t\t<diff_record>{#server}> {#dedirec}Difference between {1}{#dedirec} and {2}{#dedirec} is: {#highlite}{3}<\/diff_record>\r\n\r\n\t\t<!-- pb messages -->\r\n\t\t<pb>{#server}> {#dedirec}Dedimania Personal Best: {#highlite}{1}{#dedirec}({#rank}{2}{#dedirec})<\/pb>\r\n\t\t<pb_none>{#server}> {#error}You don't have a Dedimania record on this track yet...<\/pb_none>\r\n\r\n\t\t<!-- ban messages -->\r\n\t\t<banned_login>{#server}>> {#highlite}{1} {#server}({#highlite}{2}{#server}) {#error}is banned from Dedimania!<\/banned_login>\r\n\t\t<banned_finish>{#server}> {#error}Finish ignored by Dedimania as you are banned!<\/banned_finish>\r\n\t<\/messages>\r\n<\/dedimania>\r\n\" > ${WORKDIR}\/xaseco\/dedimania.xml\r\nfi\r\n## dedimania.xml }}}\r\n\r\n# Get the restart-script for xaseco\r\nwget https:\/\/raw.githubusercontent.com\/Hoerli1337\/xaseco-restartscript\/master\/restart.sh -qO ${WORKDIR}\/xaseco\/auto-restart.sh\r\nchmod 775 -v ${WORKDIR}\/xaseco\/auto-restart.sh\r\n# Get fake PID-File\r\nwget https:\/\/raw.githubusercontent.com\/Hoerli1337\/xaseco-restartscript\/master\/pid.txt -qO ${WORKDIR}\/xaseco\/pid.txt\r\n\r\n## Create a Start-file to run two processes with one start-command\r\n\r\n## {{{ Startfile\r\n## Create startfile\r\nif [ ! -f ${WORKDIR}\/start.sh ]; then\r\necho \"#!\/bin\/sh\r\ncd \/home\/container\/xaseco\r\nscreen -d -m -S xAseco .\/Aseco.sh\r\ncd \/home\/container\/TrackManiaServer\r\n.\/TrackmaniaServer \/nodaemon \/dedicated_cfg=dedicated_cfg.txt \/game_settings=MatchSettings\/tracklist.txt \/noautoquit\r\n\" > ${WORKDIR}\/start.sh\r\nfi\r\nchmod 775 -v ${WORKDIR}\/start.sh\r\n## }}}\r\n\r\n## {{{ CronJob for xAseco\r\n## Create Cronjob\r\n#if [ ! -f \/var\/spool\/cron\/crontabs\/container ]; then\r\n#echo \"*\/1 * * * * container cd \/home\/container\/xaseco\/ && .\/auto-restart.sh\r\n#\" > \/var\/spool\/cron\/crontabs\/container\r\n#fi\r\n\r\n#crontab ${WORKDIR}\/crontab.tmp\r\n## }}}\r\n\r\necho \"--- Install done! Have fun! ---\"",
            "container": "alpine:3.11",
            "entrypoint": "ash"
        }
    },
    "variables": [
        {
            "name": "MASTERSERVER_ACCOUNT_USER",
            "description": "TrackMania Login",
            "env_variable": "MASTERSERVER_ACCOUNT_USER",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string"
        },
        {
            "name": "MASTERSERVER_ACCOUNT_PWD",
            "description": "TrackMania Password",
            "env_variable": "MASTERSERVER_ACCOUNT_PWD",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string"
        },
        {
            "name": "MASTERSERVER_KEY",
            "description": "Master server key - The last 3 characters of your key! Leave empty if you use a TMNF-Account.",
            "env_variable": "MASTERSERVER_KEY",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "string|max:3"
        },
        {
            "name": "SERVER_NAME",
            "description": "TrackMania server name",
            "env_variable": "SERVER_NAME",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string"
        },
        {
            "name": "MAX_PLAYERS",
            "description": "Max players value",
            "env_variable": "MAX_PLAYERS",
            "default_value": "32",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|int|max:255"
        },
        {
            "name": "TM_SERVER_PORT",
            "description": "TrackMania Server Port",
            "env_variable": "TM_SERVER_PORT",
            "default_value": "2350",
            "user_viewable": true,
            "user_editable": false,
            "rules": "required|int"
        },
        {
            "name": "DEDICATED_CFG",
            "description": "Dedicated config file",
            "env_variable": "DEDICATED_CFG",
            "default_value": "dedicated_cfg.txt",
            "user_viewable": true,
            "user_editable": false,
            "rules": "required|string"
        },
        {
            "name": "MATCH_SETTINGS",
            "description": "Match settings config file",
            "env_variable": "MATCH_SETTINGS",
            "default_value": "MatchSettings\/tracklist.txt",
            "user_viewable": true,
            "user_editable": false,
            "rules": "required|string"
        },
        {
            "name": "SUPERADMIN_PWD",
            "description": "SuperAdmin password",
            "env_variable": "SUPERADMIN_PWD",
            "default_value": "SuperAdmin",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string"
        },
        {
            "name": "ADMIN_PWD",
            "description": "Admin password",
            "env_variable": "ADMIN_PWD",
            "default_value": "Admin",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string"
        },
        {
            "name": "USER_PWD",
            "description": "User password",
            "env_variable": "USER_PWD",
            "default_value": "User",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string"
        },
        {
            "name": "SERVER_P2P_PORT",
            "description": "P2P-Port",
            "env_variable": "SERVER_P2P_PORT",
            "default_value": "3450",
            "user_viewable": true,
            "user_editable": false,
            "rules": "required|int"
        },
        {
            "name": "XMLRPC_PORT",
            "description": "XML RCP Port",
            "env_variable": "XMLRPC_PORT",
            "default_value": "5000",
            "user_viewable": true,
            "user_editable": false,
            "rules": "required|int"
        },
        {
            "name": "MAX_SPECTATORS",
            "description": "Spectator-Slots",
            "env_variable": "MAX_SPECTATORS",
            "default_value": "32",
            "user_viewable": true,
            "user_editable": false,
            "rules": "required|int|max:255"
        },
        {
            "name": "Enviroment",
            "description": "Change between stadium for Nations Forever and keep it empty for United Forever.",
            "env_variable": "PACKMASK",
            "default_value": "stadium",
            "user_viewable": true,
            "user_editable": true,
            "rules": "string|max:7"
        }
    ]
}
